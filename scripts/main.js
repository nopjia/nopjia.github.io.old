"use strict";var RenderContext=function(t){var e,o,n,i,a,r,s,c,l,d,p,u,m,h=this,f=t,v=Date.now(),y=16777215,E=0,x=function(){e=new THREE.WebGLRenderer({canvas:f,alpha:!1,depth:!0,stencil:!1,antialias:!1}),e.setSize(i,a),e.setClearColor(E),e.autoClear=!1},g=function(){i=f.parentNode.clientWidth,a=f.parentNode.clientHeight,r=i/a,e.setSize(i,a),n.aspect=r,n.updateProjectionMatrix()},w=function(){i=f.clientWidth,a=f.clientHeight,r=i/a,x(),n=new THREE.PerspectiveCamera(45,r,.01,100),o=new THREE.Scene,window.addEventListener("resize",g,!1),h.customInit()},z=function(){var t=Date.now(),e=.001*(t-v);return v=t,e};this.update=function(){e.clearTarget(null);var t=z();this.customUpdate(t),e.render(o,n)},this.getRenderer=function(){return e},this.getScene=function(){return o},this.getCamera=function(){return n},this.setColors=function(t,n){c.color.set(t),l.color.set(n),e.setClearColor(n),o.fog.color.set(n),y=t,E=n},this.customInit=function(){n.position.z=10,u=new THREE.Vector3(10,10,10),d=new THREE.Box3;var t=20;o.fog=new THREE.Fog(E,(-t),2*u.z+t/10);var e=new THREE.DirectionalLight(16777215,1);e.position.set(1,2,1),o.add(e),o.add(new THREE.AmbientLight(8947848)),c=new THREE.MeshBasicMaterial({color:y,wireframe:!0}),l=new THREE.MeshLambertMaterial({color:E,transparent:!0,depthTest:!0,depthWrite:!1,polygonOffset:!0,polygonOffsetFactor:1});var i="models/icosahedron.json",a=20;s=[];var r=new THREE.JSONLoader((!0));r.load(i,function(t){for(var e=0;e<a;e++){var n=new THREE.Mesh(t,c),i=new THREE.Mesh(t,l),r=d.size(),p=new THREE.Vector3(r.x*Math.random()+d.min.x,r.y*Math.random()+d.min.y,r.z*Math.random()+d.min.z);n.position.copy(p),i.position.copy(p);var u=1,m=[u*Math.random()-u/2,u*Math.random()-u/2,u*Math.random()-u/2];n.avel=i.avel=m;var h=1,f=[h*Math.random()-h/2,h*Math.random()-h/2,h*Math.random()-h/2];n.vel=i.vel=f,s.push(n),s.push(i),o.add(n),o.add(i)}})},this.customUpdate=function(t){for(var e=0;e<s.length;e++)s[e].rotation.x+=s[e].avel[0]*t,s[e].rotation.y+=s[e].avel[1]*t,s[e].rotation.z+=s[e].avel[2]*t,s[e].position.x+=s[e].vel[0]*t,s[e].position.y+=s[e].vel[1]*t,s[e].position.z+=s[e].vel[2]*t;for(e=0;e<s.length;e+=2)if(!d.containsPoint(s[e].position)){var o=s[e],i=s[e+1];o.position.x>d.max.x?o.position.x=i.position.x=d.min.x:o.position.x<d.min.x&&(o.position.x=i.position.x=d.max.x),o.position.y>d.max.y?o.position.y=i.position.y=d.min.y:o.position.y<d.min.y&&(o.position.y=i.position.y=d.max.y),o.position.z>d.max.z?o.position.z=i.position.z=d.min.z:o.position.z<d.min.z&&(o.position.z=i.position.z=d.max.z)}var a=.01,r=window.pageYOffset;void 0===m&&(m=r),n.position.y-=a*(r-m),m=r;var c=n.position.clone();c.z-=u.z,d.min.subVectors(c,u),d.max.addVectors(c,u),p&&(p.position.copy(c),p.scale.copy(d.size()))},w()};RenderContext.prototype.constructor=RenderContext,function(){function t(t){return("0"+parseInt(t).toString(16)).slice(-2)}function e(e){return/^#[0-9A-F]{6}$/i.test(e)?e:(e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),"#"+t(e[1])+t(e[2])+t(e[3]))}console.log("Hello! My name is Nop!");var o=document.getElementById("canvas"),n=new RenderContext(o),i=function(){n.update(),requestAnimationFrame(i)},a=function(){var t;return function(){if(this!==t){document.body.className=this.dataset.palette||"",this.classList.add("selected"),t&&t.classList.remove("selected"),t=this;var o=e(window.getComputedStyle(document.body).getPropertyValue("background-color")),i=e(window.getComputedStyle(document.body).getPropertyValue("color"));n.setColors(i,o),console.log("Scheme: "+i+","+o)}}}();Array.prototype.forEach.call(document.querySelector(".scheme-palette").children,function(t){t.onclick=a}),a.call(document.querySelector(".scheme-palette .selected")),i()}();